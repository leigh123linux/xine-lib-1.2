# Note that this is NOT a relocatable package
%define ver     @SPEC_VERSION@
%define rel     0
%define prefix  @prefix@
%define name    @PACKAGE@

Name:        %{name}
Summary:     A Free Video Player.
Summary(ko): °ø°³ µ¿¿µ»ó ÇÃ·¹ÀÌ¾î
Version:     %{ver}
Release:     %{rel}
Copyright:   GPL
Group:       Development/Libraries
Source:      http://xine.sourceforge.net/files/@PACKAGE@-@VERSION@.tar.gz
URL:         http://xine.sourceforge.net
Packager:    Daniel Caujolle-Bert <f1rmb@users.sourceforge.net>
BuildRoot:   /tmp/%{name}-root

@HAVE_OSS_TRUE@%package oss
@HAVE_OSS_TRUE@Summary:     XINE - oss support.
@HAVE_OSS_TRUE@Group:       Development/Libraries
@HAVE_OSS_TRUE@Requires:    xine-lib >= 0.5.0

@HAVE_ALSA05_TRUE@%package alsa05
@HAVE_ALSA05_TRUE@Summary:     XINE - alsa 0.5.x support.
@HAVE_ALSA05_TRUE@Group:       Development/Libraries
@HAVE_ALSA05_TRUE@Requires:    xine-lib >= 0.5.0

@HAVE_ALSA09_TRUE@%package alsa09
@HAVE_ALSA09_TRUE@Summary:     XINE - alsa >= 0.9.x support.
@HAVE_ALSA09_TRUE@Group:       Development/Libraries
@HAVE_ALSA09_TRUE@Requires:    xine-lib >= 0.5.0

@HAVE_ARTS_TRUE@%package arts
@HAVE_ARTS_TRUE@Summary:     XINE - arts support.
@HAVE_ARTS_TRUE@Group:       Development/Libraries
@HAVE_ARTS_TRUE@Requires:    xine-lib >= 0.5.0

@HAVE_ESD_TRUE@%package esd
@HAVE_ESD_TRUE@Summary:     XINE - esd support.
@HAVE_ESD_TRUE@Group:       Development/Libraries
@HAVE_ESD_TRUE@Requires:    xine-lib >= 0.5.0, libesd

@HAVE_DXR3_TRUE@%package dxr3
@HAVE_DXR3_TRUE@Summary:     XINE - DXR3 support.
@HAVE_DXR3_TRUE@Group:       Development/Libraries
@HAVE_DXR3_TRUE@Requires:    xine-lib >= 0.5.0

@HAVE_XV_TRUE@%package xv
@HAVE_XV_TRUE@Summary:     XINE - XFree XVideo support.
@HAVE_XV_TRUE@Group:       Development/Libraries
@HAVE_XV_TRUE@Requires:    xine-lib >= 0.5.0

@HAVE_AA_TRUE@%package aa
@HAVE_AA_TRUE@Summary:     XINE - Ascii Art support.
@HAVE_AA_TRUE@Group:       Development/Libraries
@HAVE_AA_TRUE@Requires:    xine-lib >= 0.5.0, libaa

@W32DLL_DEP@%package w32dll
@W32DLL_DEP@Summary:     XINE - win32dll decoder support.
@W32DLL_DEP@Group:       Development/Libraries
@W32DLL_DEP@Requires:    xine-lib >= 0.5.0

%package docs
Summary:     XINE - html API documentation.
Group:       Documentation

%description
xine is a free gpl-licensed video player for unix-like systems.
We support mpeg-2 and mpeg-1 system (audio + video multiplexed) streams,
eventually mpeg-4 and other formats might be added.

xine plays the video and audio data of mpeg-2 videos and synchronizes
the playback of both. Depending on the properties of the mpeg stream,
playback will need more or less processor power, 100% frame rate
has been seen on a 400 MHz P II system.

%description -l fr
xine est un lecteur vidéo libre sous license GPL pour les systèmes de
type unix. Nous supportons les flux mpeg-2 et mpeg-1 (audio + vidéo 
multiplexés), éventuellement le mpeg-4 et d'autres formats peuvent
êtres ajoutés.

xine joue les données vidéo et audio de vidéo mpeg-2 et synchronise
la lecture des deux. En fonction des propriétes du flux mpeg,
la lecture aura besoin de plus ou moins de puissance du processeur, 
100% de restitution de trame a été vus sur un système PII 400MHz.

%description -l ko
xine ´Â GPL¶óÀÌ¼±½º¸¦ µû¸£´Â UNIX¿ë °ø°³ µ¿¿µ»ó ÇÃ·¹ÀÌ¾îÀÔ´Ï´Ù. ÀÌ
ÇÃ·¹ÀÌ¾î´Â mpeg-2 ¿Í mpeg 1 ½ºÆ®¸²À» Áö¿øÇÏ¸ç, ÇöÀç´Â Áö¿øÇÏÁö
¾ÊÁö¸¸ ³ªÁß¿¡´Â mpeg-4 ¿Í ´Ù¸¥ Çü½ÄÀÇ µ¿¿µ»óµµ Áö¿øÇÒ ¿¹Á¤ÀÔ´Ï´Ù.

@HAVE_OSS_TRUE@%description oss
@HAVE_OSS_TRUE@audio plugin with oss support.

@HAVE_ALSA05_TRUE@%description alsa05
@HAVE_ALSA05_TRUE@audio plugin with alsa 0.5.x support.

@HAVE_ALSA09_TRUE@%description alsa09
@HAVE_ALSA09_TRUE@audio plugin with alsa >= 0.9.x support.

@HAVE_ARTS_TRUE@%description arts
@HAVE_ARTS_TRUE@audio plugin with arts support.

@HAVE_ESD_TRUE@%description esd
@HAVE_ESD_TRUE@audio plugin with esd support.

@HAVE_DXR3_TRUE@%description dxr3
@HAVE_DXR3_TRUE@video/decoder plugins for DXR3 card support.

@HAVE_XV_TRUE@%description xv
@HAVE_XV_TRUE@video plugin using XFree XVideo extension.

@HAVE_AA_TRUE@%description aa
@HAVE_AA_TRUE@video plugin using Ascii Art library.

@W32DLL_DEP@%description w32dll
@W32DLL_DEP@win32dll decoder support.

%description docs
HTML documentation of XINE API.

%prep
%setup -n @TAR_NAME@

%build
./configure --prefix=%{prefix}
make

%install
if [ -d $RPM_BUILD_ROOT ]; then rm -rf $RPM_BUILD_ROOT; fi
#mkdir -p $RPM_BUILD_ROOT/usr/include/X11/pixmaps
make install-strip prefix=$RPM_BUILD_ROOT%{prefix}
#cp doc/*.xpm $RPM_BUILD_ROOT/usr/include/X11/pixmaps

%clean
rm -rf $RPM_BUILD_ROOT

%files
%defattr(-,root,root)
%{prefix}/bin/xine-config
%{prefix}/man/man3/xine-lib.3
%{prefix}/man/man3/ao_functions_t.3
%{prefix}/man/man3/demux_strategy.3
%{prefix}/man/man3/video_cap.3
%{prefix}/man/man3/vo_overlay_t.3
%{prefix}/man/man3/autoplay_group.3
%{prefix}/man/man3/event_group.3
%{prefix}/man/man3/video_group.3
%{prefix}/man/man3/xine.h.3
%{prefix}/man/man3/browse_group.3
%{prefix}/man/man3/loadplugins_group.3
%{prefix}/man/man3/video_prop.3
%{prefix}/man/man3/xine_api.3
%{prefix}/man/man3/build_info.3
%{prefix}/man/man3/mrl_t.3
%{prefix}/man/man3/video_ratio.3
%{prefix}/man/man3/xine_init.3
%{prefix}/man/man3/cfg_data_t.3
%{prefix}/man/man3/mrl_types.3
%{prefix}/man/man3/visual_types.3
%{prefix}/man/man3/xine_management.3
%{prefix}/man/man3/config_group.3
%{prefix}/man/man3/status_group.3
%{prefix}/man/man3/vo_driver_s.3
%{prefix}/man/man3/xine_t.3
%{prefix}/man/man3/config_values_s.3
%{prefix}/man/man3/ui_callbacks.3
%{prefix}/man/man3/vo_driver_t.3
%{prefix}/man/man3/xine_version.3
%{prefix}/man/man3/config_values_t.3
%{prefix}/man/man3/version_group.3
%{prefix}/man/man3/vo_frame_t.3
%{prefix}/include/xine/*.h
%{prefix}/include/xine.h
# input plugins
%{prefix}/lib/xine/plugins/xineplug_inp_dvd.la
%{prefix}/lib/xine/plugins/xineplug_inp_dvd.so
%{prefix}/lib/xine/plugins/xineplug_inp_file.la
%{prefix}/lib/xine/plugins/xineplug_inp_file.so
%{prefix}/lib/xine/plugins/xineplug_inp_net.la
%{prefix}/lib/xine/plugins/xineplug_inp_net.so
%{prefix}/lib/xine/plugins/xineplug_inp_rtp.la
%{prefix}/lib/xine/plugins/xineplug_inp_rtp.so
%{prefix}/lib/xine/plugins/xineplug_inp_stdin_fifo.la
%{prefix}/lib/xine/plugins/xineplug_inp_stdin_fifo.so
%{prefix}/lib/xine/plugins/xineplug_inp_vcd.la
%{prefix}/lib/xine/plugins/xineplug_inp_vcd.so
# demuxer plugins
%{prefix}/lib/xine/plugins/xineplug_dmx_avi.la
%{prefix}/lib/xine/plugins/xineplug_dmx_avi.so
%{prefix}/lib/xine/plugins/xineplug_dmx_mpeg.la
%{prefix}/lib/xine/plugins/xineplug_dmx_mpeg.so
%{prefix}/lib/xine/plugins/xineplug_dmx_mpeg_audio.la
%{prefix}/lib/xine/plugins/xineplug_dmx_mpeg_audio.so
%{prefix}/lib/xine/plugins/xineplug_dmx_mpeg_block.la
%{prefix}/lib/xine/plugins/xineplug_dmx_mpeg_block.so
%{prefix}/lib/xine/plugins/xineplug_dmx_mpeg_elem.la
%{prefix}/lib/xine/plugins/xineplug_dmx_mpeg_elem.so
%{prefix}/lib/xine/plugins/xineplug_dmx_mpeg_pes.la
%{prefix}/lib/xine/plugins/xineplug_dmx_mpeg_pes.so
%{prefix}/lib/xine/plugins/xineplug_dmx_mpeg_ts.la
%{prefix}/lib/xine/plugins/xineplug_dmx_mpeg_ts.so
# decoder plugins
%{prefix}/lib/xine/plugins/xineplug_decode_ac3.la
%{prefix}/lib/xine/plugins/xineplug_decode_ac3.so
%{prefix}/lib/xine/plugins/xineplug_decode_ff.so
%{prefix}/lib/xine/plugins/xineplug_decode_ff.la
%{prefix}/lib/xine/plugins/xineplug_decode_lpcm.so
%{prefix}/lib/xine/plugins/xineplug_decode_lpcm.la
%{prefix}/lib/xine/plugins/xineplug_decode_mad.so
%{prefix}/lib/xine/plugins/xineplug_decode_mad.la
%{prefix}/lib/xine/plugins/xineplug_decode_mpeg2.la
%{prefix}/lib/xine/plugins/xineplug_decode_mpeg2.so
#%{prefix}/lib/xine/plugins/xineplug_decode_mpg123.la
#%{prefix}/lib/xine/plugins/xineplug_decode_mpg123.so
%{prefix}/lib/xine/plugins/xineplug_decode_spu.la
%{prefix}/lib/xine/plugins/xineplug_decode_spu.so
# audio driver plugins
# see other packages.
#
# video driver plugins
%{prefix}/lib/xine/plugins/xineplug_vo_out_syncfb.la
%{prefix}/lib/xine/plugins/xineplug_vo_out_syncfb.so
%{prefix}/lib/xine/plugins/xineplug_vo_out_xshm.la
%{prefix}/lib/xine/plugins/xineplug_vo_out_xshm.so
# lib and logo.
%{prefix}/lib/libxine*.la
%{prefix}/lib/libxine*.so*
%{prefix}/share/xine/skins/*

@HAVE_OSS_TRUE@%files oss
@HAVE_OSS_TRUE@%{prefix}/lib/xine/plugins/xineplug_ao_out_oss.la
@HAVE_OSS_TRUE@%{prefix}/lib/xine/plugins/xineplug_ao_out_oss.so

@HAVE_ALSA05_TRUE@%files alsa05
@HAVE_ALSA05_TRUE@%{prefix}/lib/xine/plugins/xineplug_ao_out_alsa05.la
@HAVE_ALSA05_TRUE@%{prefix}/lib/xine/plugins/xineplug_ao_out_alsa05.so

@HAVE_ALSA09_TRUE@%files alsa09
@HAVE_ALSA09_TRUE@%{prefix}/lib/xine/plugins/xineplug_ao_out_alsa.la
@HAVE_ALSA09_TRUE@%{prefix}/lib/xine/plugins/xineplug_ao_out_alsa.so

@HAVE_ARTS_TRUE@%files arts
@HAVE_ARTS_TRUE@%{prefix}/lib/xine/plugins/xineplug_ao_out_arts.la
@HAVE_ARTS_TRUE@%{prefix}/lib/xine/plugins/xineplug_ao_out_arts.so

@HAVE_ESD_TRUE@%files esd
@HAVE_ESD_TRUE@%{prefix}/lib/xine/plugins/xineplug_ao_out_esd.la
@HAVE_ESD_TRUE@%{prefix}/lib/xine/plugins/xineplug_ao_out_esd.so

@HAVE_DXR3_TRUE@%files dxr3
@HAVE_DXR3_TRUE@%{prefix}/lib/xine/plugins/xineplug_decode_dxr3.la
@HAVE_DXR3_TRUE@%{prefix}/lib/xine/plugins/xineplug_decode_dxr3.so
@HAVE_DXR3_TRUE@%{prefix}/lib/xine/plugins/xineplug_vo_out_dxr3.la
@HAVE_DXR3_TRUE@%{prefix}/lib/xine/plugins/xineplug_vo_out_dxr3.so
@HAVE_DXR3_TRUE@%{prefix}/include/dxr3_overlay.h

@HAVE_XV_TRUE@%files xv
@HAVE_XV_TRUE@%{prefix}/lib/xine/plugins/xineplug_vo_out_xv.la
@HAVE_XV_TRUE@%{prefix}/lib/xine/plugins/xineplug_vo_out_xv.so

@HAVE_AA_TRUE@%files aa
@HAVE_AA_TRUE@%{prefix}/lib/xine/plugins/xineplug_vo_out_aa.la
@HAVE_AA_TRUE@%{prefix}/lib/xine/plugins/xineplug_vo_out_aa.so

@W32DLL_DEP@%files w32dll
@W32DLL_DEP@%{prefix}/lib/xine/plugins/xineplug_decode_w32dll.la
@W32DLL_DEP@%{prefix}/lib/xine/plugins/xineplug_decode_w32dll.so

%files docs
%{prefix}/share/doc/xine/xine-lib-API/*

%changelog
* Sun Aug 19 2001 Matthias Dahl <matthew2k@web.de>
- The usual update to the filelist :)
- temporarily removed mpg123 decoder plugin from filelist cause it is not
  built with the recent CVS tree
* Thu Jul 26 2001 Daniel Caujolle-Bert <f1rmb@users.sourceforge.net>
- Made oss, aa, xv, esd, w32dll, documentation as separate packages.
* Thu Jul 26 2001 Matthias Dahl <matthew2k@web.de>
- added seperate arts package and one missing demuxer plugin to filelist
* Wed Jul 18 2001 Daniel Caujolle-Bert <f1rmb@users.sourceforge.net>
- list all plugins to avoid *strange* inclusion ;-).
* Sun Jun 10 2001 Matthias Dahl <matthew2k@web.de>
- updated filelist
- re-activated execution of /sbin/ldconfig as post install script
* Thu Mar 28 2001 Daniel Caujolle-Bert <f1rmb@users.sourceforge.net>
- add korean summary, patch from Louis JANG <louis@ns.mizi.com>
* Thu Jan 11 2001 Daniel Caujolle-Bert <f1rmb@users.sourceforge.net>
- patch from Sung-Hyun Nam <namsh@lgic.co.kr> applied.
* Fri Oct 17 2000 Daniel Caujolle-Bert <f1rmb@users.sourceforge.net>
- first spec file.
