# Note that this is NOT a relocatable package
%define ver     @SPEC_VERSION@
%define rel     0
%define prefix  /usr
%define name    @PACKAGE@

Name:        %{name}
Summary:     A Free Video Player.
Summary(ko): °ø°³ µ¿¿µ»ó ÇÃ·¹ÀÌ¾î
Version:     %{ver}
Release:     %{rel}
Copyright:   GPL
Group:       Development/Libraries
Source:      http://xine.sourceforge.net/files/@PACKAGE@-@VERSION@.tar.gz
URL:         http://xine.sourceforge.net
Packager:    Daniel Caujolle-Bert <f1rmb@users.sourceforge.net>
BuildRoot:   /tmp/%{name}-root

@HAVE_OSS_TRUE@%package oss
@HAVE_OSS_TRUE@Summary:     XINE - oss support.
@HAVE_OSS_TRUE@Group:       Development/Libraries
@HAVE_OSS_TRUE@Requires:    xine-lib >= %{ver}

@HAVE_ALSA09_TRUE@%package alsa09
@HAVE_ALSA09_TRUE@Summary:     XINE - alsa >= 0.9.x support.
@HAVE_ALSA09_TRUE@Group:       Development/Libraries
@HAVE_ALSA09_TRUE@Requires:    xine-lib >= %{ver}

@HAVE_ARTS_TRUE@%package arts
@HAVE_ARTS_TRUE@Summary:     XINE - arts support.
@HAVE_ARTS_TRUE@Group:       Development/Libraries
@HAVE_ARTS_TRUE@Requires:    xine-lib >= %{ver}

@HAVE_ESD_TRUE@%package esd
@HAVE_ESD_TRUE@Summary:     XINE - esd support.
@HAVE_ESD_TRUE@Group:       Development/Libraries
@HAVE_ESD_TRUE@Requires:    xine-lib >= %{ver}, esound

@HAVE_DXR3_TRUE@%package dxr3
@HAVE_DXR3_TRUE@Summary:     XINE - DXR3 support.
@HAVE_DXR3_TRUE@Group:       Development/Libraries
@HAVE_DXR3_TRUE@Requires:    xine-lib >= %{ver}

@HAVE_XV_TRUE@%package xv
@HAVE_XV_TRUE@Summary:     XINE - XFree XVideo support.
@HAVE_XV_TRUE@Group:       Development/Libraries
@HAVE_XV_TRUE@Requires:    xine-lib >= %{ver}

@HAVE_SDL_TRUE@%package sdl
@HAVE_SDL_TRUE@Summary:     XINE - SDL (Simple DirectMedia Layer) video support.
@HAVE_SDL_TRUE@Group:       Development/Libraries
@HAVE_SDL_TRUE@Requires:    xine-lib >= %{ver}, libSDL

@HAVE_AA_TRUE@%package aa
@HAVE_AA_TRUE@Summary:     XINE - Ascii Art support.
@HAVE_AA_TRUE@Group:       Development/Libraries
@HAVE_AA_TRUE@Requires:    xine-lib >= %{ver}

@HAVE_OPENGL_TRUE@%package opengl
@HAVE_OPENGL_TRUE@Summary:     XINE - OpenGL support.
@HAVE_OPENGL_TRUE@Group:       Development/Libraries
@HAVE_OPENGL_TRUE@Requires:    xine-lib >= %{ver}

@W32DLL_DEP@%package w32dll
@W32DLL_DEP@Summary:     XINE - win32dll decoder support.
@W32DLL_DEP@Group:       Development/Libraries
@W32DLL_DEP@Requires:    xine-lib >= %{ver}

@HAVE_VORBIS_TRUE@%package oggvorbis
@HAVE_VORBIS_TRUE@Summary:     XINE - ogg/vorbis decoder/demuxer support.
@HAVE_VORBIS_TRUE@Group:       Development/Libraries
@HAVE_VORBIS_TRUE@Requires:    xine-lib >= %{ver}, libogg, libvorbis

%package docs
Summary:     XINE - html API documentation.
Group:       Documentation

%description
xine is a free gpl-licensed video player for unix-like systems.
We support mpeg-2 and mpeg-1 system (audio + video multiplexed) streams,
eventually mpeg-4 and other formats might be added.

xine plays the video and audio data of mpeg-2 videos and synchronizes
the playback of both. Depending on the properties of the mpeg stream,
playback will need more or less processor power, 100% frame rate
has been seen on a 400 MHz P II system.

%description -l fr
xine est un lecteur vidéo libre sous license GPL pour les systèmes de
type unix. Nous supportons les flux mpeg-2 et mpeg-1 (audio + vidéo 
multiplexés), éventuellement le mpeg-4 et d'autres formats peuvent
êtres ajoutés.

xine joue les données vidéo et audio de vidéo mpeg-2 et synchronise
la lecture des deux. En fonction des propriétes du flux mpeg,
la lecture aura besoin de plus ou moins de puissance du processeur, 
100% de restitution de trame a été vus sur un système PII 400MHz.

%description -l ko
xine ´Â GPL¶óÀÌ¼±½º¸¦ µû¸£´Â UNIX¿ë °ø°³ µ¿¿µ»ó ÇÃ·¹ÀÌ¾îÀÔ´Ï´Ù. ÀÌ
ÇÃ·¹ÀÌ¾î´Â mpeg-2 ¿Í mpeg 1 ½ºÆ®¸²À» Áö¿øÇÏ¸ç, ÇöÀç´Â Áö¿øÇÏÁö
¾ÊÁö¸¸ ³ªÁß¿¡´Â mpeg-4 ¿Í ´Ù¸¥ Çü½ÄÀÇ µ¿¿µ»óµµ Áö¿øÇÒ ¿¹Á¤ÀÔ´Ï´Ù.

%description -l pt
O xine é um leitor de vídeo livre ao abrigo da GPL para sistemas tipo 
Unix. Lê ficheiros MPEG-2 e MPEG-1, bem como AVIs que contenham
MS MPEG-4 / OpenDivX Video.

O xine lê o conteúdo vídeo e áudio e sincroniza-os em tempo-real. As 
necessidades de processador dependem das propriedades de cada ficheiro.
Em princípio, um sistema equipado com um Pentium-II a 400 MHz consegue 
ler qualquer vídeo com máximo desempenho.

@HAVE_OSS_TRUE@%description oss
@HAVE_OSS_TRUE@audio plugin with oss support.

@HAVE_ALSA09_TRUE@%description alsa09
@HAVE_ALSA09_TRUE@audio plugin with alsa >= 0.9.x support.

@HAVE_ARTS_TRUE@%description arts
@HAVE_ARTS_TRUE@audio plugin with arts support.

@HAVE_ESD_TRUE@%description esd
@HAVE_ESD_TRUE@audio plugin with esd support.

@HAVE_DXR3_TRUE@%description dxr3
@HAVE_DXR3_TRUE@video/decoder plugins for DXR3 card support.

@HAVE_XV_TRUE@%description xv
@HAVE_XV_TRUE@video plugin using XFree XVideo extension.

@HAVE_SDL_TRUE@%description sdl
@HAVE_SDL_TRUE@video plugin using SDL (Simple DirectMedia Layer) library.

@HAVE_AA_TRUE@%description aa
@HAVE_AA_TRUE@video plugin using Ascii Art library.

@HAVE_OPENGL_TRUE@%description opengl
@HAVE_OPENGL_TRUE@video plugin using OpenGL library.

@W32DLL_DEP@%description w32dll
@W32DLL_DEP@win32dll decoder support.

@HAVE_VORBIS_TRUE@%description oggvorbis
@HAVE_VORBIS_TRUE@ogg/vorbis decoder/demuxer support.

%description docs
HTML documentation of XINE API.

%prep
%setup -n @TAR_NAME@

%build
./configure --prefix=%{prefix}
make

%install
if [ -d $RPM_BUILD_ROOT ]; then rm -rf $RPM_BUILD_ROOT; fi
#mkdir -p $RPM_BUILD_ROOT/usr/include/X11/pixmaps
make install-strip DESTDIR=$RPM_BUILD_ROOT
#cp doc/*.xpm $RPM_BUILD_ROOT/usr/include/X11/pixmaps

%clean
rm -rf $RPM_BUILD_ROOT

%files
%defattr(-,root,root)
%{prefix}/bin/xine-config
%{prefix}/man/man1/xine-config.1*
%{prefix}/man/man3/xine-lib.3*
%{prefix}/man/man3/ao_driver_t.3*
%{prefix}/man/man3/ao_functions_t.3*
%{prefix}/man/man3/demux_strategy.3*
%{prefix}/man/man3/video_cap.3*
%{prefix}/man/man3/vo_overlay_t.3*
%{prefix}/man/man3/autoplay_group.3*
%{prefix}/man/man3/event_group.3*
%{prefix}/man/man3/video_group.3*
%{prefix}/man/man3/xine.h.3*
%{prefix}/man/man3/browse_group.3*
%{prefix}/man/man3/loadplugins_group.3*
%{prefix}/man/man3/video_prop.3*
%{prefix}/man/man3/xine_api.3*
%{prefix}/man/man3/build_info.3*
%{prefix}/man/man3/mrl_t.3*
%{prefix}/man/man3/video_ratio.3*
%{prefix}/man/man3/xine_init.3*
%{prefix}/man/man3/cfg_data_t.3*
%{prefix}/man/man3/mrl_types.3*
%{prefix}/man/man3/visual_types.3*
%{prefix}/man/man3/xine_management.3*
%{prefix}/man/man3/config_group.3*
%{prefix}/man/man3/status_group.3*
%{prefix}/man/man3/vo_driver_s.3*
%{prefix}/man/man3/xine_t.3*
%{prefix}/man/man3/config_values_s.3*
%{prefix}/man/man3/ui_callbacks.3*
%{prefix}/man/man3/vo_driver_t.3*
%{prefix}/man/man3/xine_version.3*
%{prefix}/man/man3/config_values_t.3*
%{prefix}/man/man3/version_group.3*
%{prefix}/man/man3/vo_frame_t.3*
%{prefix}/man/man3/audio_cap.3*
%{prefix}/man/man3/audio_group.3*
%{prefix}/man/man3/audio_prop.3*
%{prefix}/include/xine/*.h
%{prefix}/include/xine.h
@INSTALL_M4_TRUE@@ACLOCAL_DIR@/xine.m4
# input plugins
%{prefix}/lib/xine/plugins/xineplug_inp_dvd.la
%{prefix}/lib/xine/plugins/xineplug_inp_dvd.so
%{prefix}/lib/xine/plugins/xineplug_inp_file.la
%{prefix}/lib/xine/plugins/xineplug_inp_file.so
%{prefix}/lib/xine/plugins/xineplug_inp_http.la
%{prefix}/lib/xine/plugins/xineplug_inp_http.so
%{prefix}/lib/xine/plugins/xineplug_inp_net.la
%{prefix}/lib/xine/plugins/xineplug_inp_net.so
%{prefix}/lib/xine/plugins/xineplug_inp_rtp.la
%{prefix}/lib/xine/plugins/xineplug_inp_rtp.so
%{prefix}/lib/xine/plugins/xineplug_inp_stdin_fifo.la
%{prefix}/lib/xine/plugins/xineplug_inp_stdin_fifo.so
%{prefix}/lib/xine/plugins/xineplug_inp_vcd.la
%{prefix}/lib/xine/plugins/xineplug_inp_vcd.so
%{prefix}/lib/xine/plugins/xineplug_inp_cda.la
%{prefix}/lib/xine/plugins/xineplug_inp_cda.so
# demuxer plugins
@BUILD_ASF_TRUE@%{prefix}/lib/xine/plugins/xineplug_dmx_asf.la
@BUILD_ASF_TRUE@%{prefix}/lib/xine/plugins/xineplug_dmx_asf.so
%{prefix}/lib/xine/plugins/xineplug_dmx_avi.la
%{prefix}/lib/xine/plugins/xineplug_dmx_avi.so
%{prefix}/lib/xine/plugins/xineplug_dmx_mpeg.la
%{prefix}/lib/xine/plugins/xineplug_dmx_mpeg.so
%{prefix}/lib/xine/plugins/xineplug_dmx_mpeg_audio.la
%{prefix}/lib/xine/plugins/xineplug_dmx_mpeg_audio.so
%{prefix}/lib/xine/plugins/xineplug_dmx_mpeg_block.la
%{prefix}/lib/xine/plugins/xineplug_dmx_mpeg_block.so
%{prefix}/lib/xine/plugins/xineplug_dmx_mpeg_elem.la
%{prefix}/lib/xine/plugins/xineplug_dmx_mpeg_elem.so
%{prefix}/lib/xine/plugins/xineplug_dmx_mpeg_pes.la
%{prefix}/lib/xine/plugins/xineplug_dmx_mpeg_pes.so
%{prefix}/lib/xine/plugins/xineplug_dmx_mpeg_ts.la
%{prefix}/lib/xine/plugins/xineplug_dmx_mpeg_ts.so
@HAVE_ZLIB_TRUE@%{prefix}/lib/xine/plugins/xineplug_dmx_qt.la
@HAVE_ZLIB_TRUE@%{prefix}/lib/xine/plugins/xineplug_dmx_qt.so
%{prefix}/lib/xine/plugins/xineplug_dmx_cda.la
%{prefix}/lib/xine/plugins/xineplug_dmx_cda.so
# decoder plugins
%{prefix}/lib/xine/plugins/xineplug_decode_a52.la
%{prefix}/lib/xine/plugins/xineplug_decode_a52.so
%{prefix}/lib/xine/plugins/xineplug_decode_ff.so
%{prefix}/lib/xine/plugins/xineplug_decode_ff.la
%{prefix}/lib/xine/plugins/xineplug_decode_lpcm.so
%{prefix}/lib/xine/plugins/xineplug_decode_lpcm.la
%{prefix}/lib/xine/plugins/xineplug_decode_mad.so
%{prefix}/lib/xine/plugins/xineplug_decode_mad.la
%{prefix}/lib/xine/plugins/xineplug_decode_mpeg2.la
%{prefix}/lib/xine/plugins/xineplug_decode_mpeg2.so
#%{prefix}/lib/xine/plugins/xineplug_decode_mpg123.la
#%{prefix}/lib/xine/plugins/xineplug_decode_mpg123.so
%{prefix}/lib/xine/plugins/xineplug_decode_spu.la
%{prefix}/lib/xine/plugins/xineplug_decode_spu.so
%{prefix}/lib/xine/plugins/xineplug_decode_sputext.la
%{prefix}/lib/xine/plugins/xineplug_decode_sputext.so
%{prefix}/lib/xine/plugins/xineplug_decode_dts.la
%{prefix}/lib/xine/plugins/xineplug_decode_dts.so
%{prefix}/lib/xine/plugins/xineplug_decode_vfill.la
%{prefix}/lib/xine/plugins/xineplug_decode_vfill.so
%{prefix}/lib/xine/plugins/xineplug_decode_divx4.la
%{prefix}/lib/xine/plugins/xineplug_decode_divx4.so
# audio driver plugins
# see other packages.
#
# video driver plugins
%{prefix}/lib/xine/plugins/xineplug_vo_out_syncfb.la
%{prefix}/lib/xine/plugins/xineplug_vo_out_syncfb.so
%{prefix}/lib/xine/plugins/xineplug_vo_out_xshm.la
%{prefix}/lib/xine/plugins/xineplug_vo_out_xshm.so
# lib, logo and fonts.
@HAVE_IMLIB_TRUE@%{prefix}/bin/xine-logoconv
%{prefix}/lib/libxine*.la
%{prefix}/lib/libxine*.so*
%{prefix}/share/xine/skins/xine_logo.png
%{prefix}/share/xine/fonts/*
## intl files
%{prefix}/share/locale/fr/LC_MESSAGES/xine-lib.mo
%{prefix}/share/locale/de/LC_MESSAGES/xine-lib.mo
%{prefix}/share/locale/pt_BR/LC_MESSAGES/xine-lib.mo
%{prefix}/share/locale/sk/LC_MESSAGES/xine-lib.mo
%{prefix}/share/locale/es/LC_MESSAGES/xine-lib.mo

@HAVE_OSS_TRUE@%files oss
@HAVE_OSS_TRUE@%defattr(-,root,root)
@HAVE_OSS_TRUE@%{prefix}/lib/xine/plugins/xineplug_ao_out_oss.la
@HAVE_OSS_TRUE@%{prefix}/lib/xine/plugins/xineplug_ao_out_oss.so

@HAVE_ALSA09_TRUE@%files alsa09
@HAVE_ALSA09_TRUE@%defattr(-,root,root)
@HAVE_ALSA09_TRUE@%{prefix}/lib/xine/plugins/xineplug_ao_out_alsa.la
@HAVE_ALSA09_TRUE@%{prefix}/lib/xine/plugins/xineplug_ao_out_alsa.so

@HAVE_ARTS_TRUE@%files arts
@HAVE_ARTS_TRUE@%defattr(-,root,root)
@HAVE_ARTS_TRUE@%{prefix}/lib/xine/plugins/xineplug_ao_out_arts.la
@HAVE_ARTS_TRUE@%{prefix}/lib/xine/plugins/xineplug_ao_out_arts.so

@HAVE_ESD_TRUE@%files esd
@HAVE_ESD_TRUE@%defattr(-,root,root)
@HAVE_ESD_TRUE@%{prefix}/lib/xine/plugins/xineplug_ao_out_esd.la
@HAVE_ESD_TRUE@%{prefix}/lib/xine/plugins/xineplug_ao_out_esd.so

@HAVE_DXR3_TRUE@%files dxr3
@HAVE_DXR3_TRUE@%defattr(-,root,root)
@HAVE_DXR3_TRUE@%{prefix}/lib/xine/plugins/xineplug_decode_dxr3.la
@HAVE_DXR3_TRUE@%{prefix}/lib/xine/plugins/xineplug_decode_dxr3.so
@HAVE_DXR3_TRUE@%{prefix}/lib/xine/plugins/xineplug_vo_out_dxr3.la
@HAVE_DXR3_TRUE@%{prefix}/lib/xine/plugins/xineplug_vo_out_dxr3.so
@HAVE_DXR3_TRUE@%{prefix}/include/dxr3_video_out.h
@HAVE_DXR3_TRUE@%{prefix}/include/dxr3_vo_encoder.h

@HAVE_XV_TRUE@%files xv
@HAVE_XV_TRUE@%defattr(-,root,root)
@HAVE_XV_TRUE@%{prefix}/lib/xine/plugins/xineplug_vo_out_xv.la
@HAVE_XV_TRUE@%{prefix}/lib/xine/plugins/xineplug_vo_out_xv.so

@HAVE_SDL_TRUE@%files sdl
@HAVE_SDL_TRUE@%defattr(-,root,root)
@HAVE_SDL_TRUE@%{prefix}/lib/xine/plugins/xineplug_vo_out_sdl.la
@HAVE_SDL_TRUE@%{prefix}/lib/xine/plugins/xineplug_vo_out_sdl.so

@HAVE_AA_TRUE@%files aa
@HAVE_AA_TRUE@%defattr(-,root,root)
@HAVE_AA_TRUE@%{prefix}/lib/xine/plugins/xineplug_vo_out_aa.la
@HAVE_AA_TRUE@%{prefix}/lib/xine/plugins/xineplug_vo_out_aa.so

@HAVE_OPENGL_TRUE@%files opengl
@HAVE_OPENGL_TRUE@%defattr(-,root,root)
@HAVE_OPENGL_TRUE@%{prefix}/lib/xine/plugins/xineplug_vo_out_opengl.la
@HAVE_OPENGL_TRUE@%{prefix}/lib/xine/plugins/xineplug_vo_out_opengl.so

@W32DLL_DEP@%files w32dll
@W32DLL_DEP@%defattr(-,root,root)
@W32DLL_DEP@%{prefix}/lib/xine/plugins/xineplug_decode_w32dll.la
@W32DLL_DEP@%{prefix}/lib/xine/plugins/xineplug_decode_w32dll.so

@HAVE_VORBIS_TRUE@%files oggvorbis
@HAVE_VORBIS_TRUE@%{prefix}/lib/xine/plugins/xineplug_dmx_ogg.la
@HAVE_VORBIS_TRUE@%{prefix}/lib/xine/plugins/xineplug_dmx_ogg.so
@HAVE_VORBIS_TRUE@%{prefix}/lib/xine/plugins/xineplug_decode_vorbis.la
@HAVE_VORBIS_TRUE@%{prefix}/lib/xine/plugins/xineplug_decode_vorbis.so


%files docs
%defattr(-,root,root)
%{prefix}/share/doc/xine/xine-lib-API/*

%changelog
* Wed Feb 6 2002 Daniel Caujolle-Bert <f1rmb@users.sourceforge.net>
- added 'de,fr,pt_BR' translation catalogs.
* Sat Dec 26 2001 Matthias Dahl <matthew2k@web.de>
- added sputext decode plugin and fonts.
* Sat Dec 8 2001 Daniel Caujolle-Bert <f1rmb@users.sourceforge.net>
- ASF plugin is optional.
* Thu Dec 6 2001 Daniel Caujolle-Bert <f1rmb@users.sourceforge.net>
- Add cda plugins.
* Wed Nov 14 2001 Daniel Caujolle-Bert <f1rmb@users.sourceforge.net>
- fixed dxr3 header files inclusion, aalib deps: thanks to Andrew Meredith <andrew@anvil.org>.
* Mon Oct 29 2001 Matthias Dahl <matthew2k@web.de>
- added http input plugin
* Thu Oct 18 2001 Matthias Dahl <matthew2k@web.de>
- added asf demuxer plugin
* Sun Oct 14 2001 Daniel Caujolle-Bert <f1rmb@users.sourceforge.net>
- move vorbis in separate package. Add DivX4 decoder plugin.
* Wed Oct 10 2001 Matthias Dahl <matthew2k@web.de>
- added vorbis files and missing man pages to filelist.
* Thu Sep 27 2001 Daniel Caujolle-Bert <f1rmb@users.sourceforge.net>
- Add desktop stuff from patches by Miguel Freitas <miguel@cetuc.puc-rio.br>
- Fixed xine.m4 installation from Andrew Meredith <andrew@anvil.org>
* Fri Sep 21 2001 Matthias Dahl <matthew2k@web.de>
- added two missing files (xine-config man page and xine.m4)
* Sun Sep 16 2001 Daniel Caujolle-Bert <f1rmb@users.sourceforge.net>
- Merge patch from José Carlos Monteiro <jcm@netcabo.pt>:
  - Filelist and other minor updates,
  - Fixed some SuSE compatibility issues,
  - Added Portuguese summary.
* Sun Sep 16 2001 Daniel Caujolle-Bert <f1rmb@users.sourceforge.net>
- Add missing files.
* Sun Aug 19 2001 Matthias Dahl <matthew2k@web.de>
- The usual update to the filelist :)
- temporarily removed mpg123 decoder plugin from filelist cause it is not
  built with the recent CVS tree
* Thu Jul 26 2001 Daniel Caujolle-Bert <f1rmb@users.sourceforge.net>
- Made oss, aa, xv, esd, w32dll, documentation as separate packages.
* Thu Jul 26 2001 Matthias Dahl <matthew2k@web.de>
- added seperate arts package and one missing demuxer plugin to filelist
* Wed Jul 18 2001 Daniel Caujolle-Bert <f1rmb@users.sourceforge.net>
- list all plugins to avoid *strange* inclusion ;-).
* Sun Jun 10 2001 Matthias Dahl <matthew2k@web.de>
- updated filelist
- re-activated execution of /sbin/ldconfig as post install script
* Thu Mar 28 2001 Daniel Caujolle-Bert <f1rmb@users.sourceforge.net>
- add korean summary, patch from Louis JANG <louis@ns.mizi.com>
* Thu Jan 11 2001 Daniel Caujolle-Bert <f1rmb@users.sourceforge.net>
- patch from Sung-Hyun Nam <namsh@lgic.co.kr> applied.
* Fri Oct 17 2000 Daniel Caujolle-Bert <f1rmb@users.sourceforge.net>
- first spec file.
