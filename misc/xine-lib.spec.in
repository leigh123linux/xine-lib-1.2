# Note that this is NOT a relocatable package
%define ver     @SPEC_VERSION@
%define rel     0
%define prefix  @prefix@
%define name    @PACKAGE@

Name:        %{name}
Summary:     A Free Video Player.
Summary(ko): °ø°³ µ¿¿µ»ó ÇÃ·¹ÀÌ¾î
Version:     %{ver}
Release:     %{rel}
Copyright:   GPL
Group:       Applications/X11
Source:      http://xine.sourceforge.net/files/@PACKAGE@-@VERSION@.tar.gz
URL:         http://xine.sourceforge.net
Packager:    Daniel Caujolle-Bert <f1rmb@users.sourceforge.net>
BuildRoot:   /tmp/%{name}-root

@HAVE_ALSA05_TRUE@%package alsa05
@HAVE_ALSA05_TRUE@Summary:     XINE - alsa 0.5.x support.
@HAVE_ALSA05_TRUE@Group:       Applications/X11
@HAVE_ALSA05_TRUE@Requires:    xine-lib >= 0.5.0

@HAVE_ALSA09_TRUE@%package alsa09
@HAVE_ALSA09_TRUE@Summary:     XINE - alsa >= 0.9.x support.
@HAVE_ALSA09_TRUE@Group:       Applications/X11
@HAVE_ALSA09_TRUE@Requires:    xine-lib >= 0.5.0

@HAVE_DXR3_TRUE@%package dxr3
@HAVE_DXR3_TRUE@Summary:     XINE - DXR3 support.
@HAVE_DXR3_TRUE@Group:       Applications/X11
@HAVE_DXR3_TRUE@Requires:    xine-lib >= 0.5.0

%description
xine is a free gpl-licensed video player for unix-like systems.
We support mpeg-2 and mpeg-1 system (audio + video multiplexed) streams,
eventually mpeg-4 and other formats might be added.

xine plays the video and audio data of mpeg-2 videos and synchronizes
the playback of both. Depending on the properties of the mpeg stream,
playback will need more or less processor power, 100% frame rate
has been seen on a 400 MHz P II system.

%description -l fr
xine est un lecteur vidéo libre sous license GPL pour les systèmes de
type unix. Nous supportons les flux mpeg-2 et mpeg-1 (audio + vidéo 
multiplexés), éventuellement le mpeg-4 et d'autres formats peuvent
êtres ajoutés.

xine joue les données vidéo et audio de vidéo mpeg-2 et synchronise
la lecture des deux. En fonction des propriétes du flux mpeg,
la lecture aura besoin de plus ou moins de puissance du processeur, 
100% de restitution de trame a été vus sur un système PII 400MHz.

%description -l ko
xine ´Â GPL¶óÀÌ¼±½º¸¦ µû¸£´Â UNIX¿ë °ø°³ µ¿¿µ»ó ÇÃ·¹ÀÌ¾îÀÔ´Ï´Ù. ÀÌ
ÇÃ·¹ÀÌ¾î´Â mpeg-2 ¿Í mpeg 1 ½ºÆ®¸²À» Áö¿øÇÏ¸ç, ÇöÀç´Â Áö¿øÇÏÁö
¾ÊÁö¸¸ ³ªÁß¿¡´Â mpeg-4 ¿Í ´Ù¸¥ Çü½ÄÀÇ µ¿¿µ»óµµ Áö¿øÇÒ ¿¹Á¤ÀÔ´Ï´Ù.

@HAVE_ALSA05_TRUE@%description alsa05
@HAVE_ALSA05_TRUE@audio plugin with alsa 0.5.x support.

@HAVE_ALSA09_TRUE@%description alsa09
@HAVE_ALSA09_TRUE@audio plugin with alsa >= 0.9.x support.

@HAVE_DXR3_TRUE@%description dxr3
@HAVE_DXR3_TRUE@video/decoder plugins for DXR3 card support.

%prep
%setup -n @TAR_NAME@

%build
./configure --prefix=%{prefix}
make

%install
if [ -d $RPM_BUILD_ROOT ]; then rm -rf $RPM_BUILD_ROOT; fi
#mkdir -p $RPM_BUILD_ROOT/usr/include/X11/pixmaps
make install-strip prefix=$RPM_BUILD_ROOT%{prefix}
#cp doc/*.xpm $RPM_BUILD_ROOT/usr/include/X11/pixmaps

%post
/sbin/ldconfig

%clean
rm -rf $RPM_BUILD_ROOT

%files
%defattr(-,root,root)
%{prefix}/bin/xine-config
%{prefix}/man/man3/xine-lib.*
%{prefix}/man/fr/man3/xine-lib.*
%{prefix}/include/xine/*.h
%{prefix}/include/xine.h
# input plugins
%{prefix}/lib/xine/plugins/xineplug_inp_dvd.la
%{prefix}/lib/xine/plugins/xineplug_inp_dvd.so
%{prefix}/lib/xine/plugins/xineplug_inp_file.la
%{prefix}/lib/xine/plugins/xineplug_inp_file.so
%{prefix}/lib/xine/plugins/xineplug_inp_net.la
%{prefix}/lib/xine/plugins/xineplug_inp_net.so
%{prefix}/lib/xine/plugins/xineplug_inp_rtp.la
%{prefix}/lib/xine/plugins/xineplug_inp_rtp.so
%{prefix}/lib/xine/plugins/xineplug_inp_stdin_fifo.la
%{prefix}/lib/xine/plugins/xineplug_inp_stdin_fifo.so
%{prefix}/lib/xine/plugins/xineplug_inp_vcd.la
%{prefix}/lib/xine/plugins/xineplug_inp_vcd.so
# demuxer plugins
%{prefix}/lib/xine/plugins/xineplug_dmx_avi.la
%{prefix}/lib/xine/plugins/xineplug_dmx_avi.so
%{prefix}/lib/xine/plugins/xineplug_dmx_mpeg.la
%{prefix}/lib/xine/plugins/xineplug_dmx_mpeg.so
%{prefix}/lib/xine/plugins/xineplug_dmx_mpeg_audio.la
%{prefix}/lib/xine/plugins/xineplug_dmx_mpeg_audio.so
%{prefix}/lib/xine/plugins/xineplug_dmx_mpeg_block.la
%{prefix}/lib/xine/plugins/xineplug_dmx_mpeg_block.so
%{prefix}/lib/xine/plugins/xineplug_dmx_mpeg_elem.la
%{prefix}/lib/xine/plugins/xineplug_dmx_mpeg_elem.so
# decoder plugins
%{prefix}/lib/xine/plugins/xineplug_decode_ac3.la
%{prefix}/lib/xine/plugins/xineplug_decode_ac3.so
%{prefix}/lib/xine/plugins/xineplug_decode_mpeg2.la
%{prefix}/lib/xine/plugins/xineplug_decode_mpeg2.so
%{prefix}/lib/xine/plugins/xineplug_decode_mpg123.la
%{prefix}/lib/xine/plugins/xineplug_decode_mpg123.so
%{prefix}/lib/xine/plugins/xineplug_decode_spu.la
%{prefix}/lib/xine/plugins/xineplug_decode_spu.so
%{prefix}/lib/xine/plugins/xineplug_decode_w32dll.la
%{prefix}/lib/xine/plugins/xineplug_decode_w32dll.so
# audio driver plugins
%{prefix}/lib/xine/plugins/xineplug_ao_out_esd.la
%{prefix}/lib/xine/plugins/xineplug_ao_out_esd.so
%{prefix}/lib/xine/plugins/xineplug_ao_out_oss.la
%{prefix}/lib/xine/plugins/xineplug_ao_out_oss.so
# video driver plugins
%{prefix}/lib/xine/plugins/xineplug_vo_out_aa.la
%{prefix}/lib/xine/plugins/xineplug_vo_out_aa.so
%{prefix}/lib/xine/plugins/xineplug_vo_out_syncfb.la
%{prefix}/lib/xine/plugins/xineplug_vo_out_syncfb.so
%{prefix}/lib/xine/plugins/xineplug_vo_out_xshm.la
%{prefix}/lib/xine/plugins/xineplug_vo_out_xshm.so
%{prefix}/lib/xine/plugins/xineplug_vo_out_xv.la
%{prefix}/lib/xine/plugins/xineplug_vo_out_xv.so
%{prefix}/lib/libxine*.la
%{prefix}/lib/libxine*.so*
%{prefix}/share/xine/skins/*
##%{prefix}/share/doc/xine/*

@HAVE_ALSA05_TRUE@%files alsa05
@HAVE_ALSA05_TRUE@%{prefix}/lib/xine/plugins/xineplug_ao_out_alsa05.la
@HAVE_ALSA05_TRUE@%{prefix}/lib/xine/plugins/xineplug_ao_out_alsa05.so

@HAVE_ALSA09_TRUE@%files alsa09
@HAVE_ALSA09_TRUE@%{prefix}/lib/xine/plugins/xineplug_ao_out_alsa.la
@HAVE_ALSA09_TRUE@%{prefix}/lib/xine/plugins/xineplug_ao_out_alsa.so


@HAVE_DXR3_TRUE@%files dxr3
@HAVE_DXR3_TRUE@%{prefix}/lib/xine/plugins/xineplug_decode_dxr3.la
@HAVE_DXR3_TRUE@%{prefix}/lib/xine/plugins/xineplug_decode_dxr3.so
@HAVE_DXR3_TRUE@%{prefix}/lib/xine/plugins/xineplug_vo_out_dxr3.la
@HAVE_DXR3_TRUE@%{prefix}/lib/xine/plugins/xineplug_vo_out_dxr3.so


%changelog
* Wed Jul 18 2001 Daniel Caujolle-Bert <f1rmb@users.sourceforge.net>
- list all plugins to avoid *strange* inclusion ;-).
* Sun Jun 10 2001 Matthias Dahl <matthew2k@web.de>
- updated filelist
- re-activated execution of /sbin/ldconfig as post install script
* Thu Mar 28 2001 Daniel Caujolle-Bert <f1rmb@users.sourceforge.net>
- add korean summary, patch from Louis JANG <louis@ns.mizi.com>
* Thu Jan 11 2001 Daniel Caujolle-Bert <f1rmb@users.sourceforge.net>
- patch from Sung-Hyun Nam <namsh@lgic.co.kr> applied.
* Fri Oct 17 2000 Daniel Caujolle-Bert <f1rmb@users.sourceforge.net>
- first spec file.
